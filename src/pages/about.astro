---
import { Image } from 'astro:assets';
import { contentfulClient, type AboutEntry } from '../lib/contentful';
import {RichTextRenderer} from '@/components/RichTextRenderer';
import Layot from '@/layouts/Layot.astro';

const { items } = await contentfulClient.getEntries<AboutEntry>({ content_type: 'about', limit: 1 });
const about = items[0];
const title = about?.fields.title ?? 'Sobre';
const descriptionRichText = about?.fields.description;
const banners = (about?.fields.banner || []) as any[];
const bannerUrls = banners.map((asset) => (asset?.fields?.file?.url ? `https:${asset.fields.file.url}` : ''));
---

<Layot title={title} description={title}>
	<div class="min-h-screen pt-20">
		<!-- Hero Section -->
		<section class="bg-white">
			<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
				{bannerUrls.length > 0 && (
					<div class="flex flex-col lg:flex-row gap-8 mb-16 items-center lg:items-start justify-center">
						<div class="flex-shrink-0 w-full lg:w-1/3 flex flex-col gap-8">
							{bannerUrls.map((src, index) => (
								<div class="group">
									<Image
										src={src}
										alt=""
										width={300}
										height={300}
										class="mx-auto aspect-square object-cover rounded-2xl shadow-lg group-hover:shadow-2xl transition-all duration-300 group-hover:scale-105"
									/>
								</div>
							))}
						</div>
						<div class="w-full lg:w-2/3 flex flex-col">
							<h1 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl mb-6 lg:mb-8 lg:text-left">
								{title}
							</h1>
	 						<article class="prose prose-lg prose-blue max-w-none">
	 							<RichTextRenderer content={about.fields.description} size={100} />
	 						</article>
						</div>
					</div>
				)}
			</div>
		</section>
		
		<!-- Content Section (removed, now in hero section) -->
	</div>
</Layot>
